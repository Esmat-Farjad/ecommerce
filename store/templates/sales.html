{% extends 'main/base.html' %}
{% load static %}
{% load humanize %}
{% block content %}
<div class="sale-page">
    <div class="heading">
        <h1 class="title">Sales Portal</h1>
        <p class="text">search the product to find it</p>
    </div>
    <div class="search-form-holder">
        <form action="" class="search-form">
            {{search_form.query}}
            <button type="submit" class="search-btn">Search</button>
        </form>
    </div>
    <div class="product-holder">
        {% for item in page_obj.object_list %}
        <div class="card">
            <a href="#" class="card-link">
                <div class="image-holder">
                    <img src="{{item.image.url}}" alt="">
                </div>
                <div class="info-holder">
                    <div class="title">
                        <p class="name">{{item.name}}</p>
                        <p class="price">{{item.price}}</p>
                    </div>
                    <p class="text">{{item.description}}</p>
                </div>
            </a>
            <div class="action">
                <button 
                class="btn-sm add-item"
                data-end-point="{% url 'store:add_to_cart' item.id %}">Add</button>
                <button class="btn-sm">Buy</button>
            </div>
            <div class="stock-badge">
                {% if item.stock > 0 %}
                <p class="success">In Stock: {{item.stock}}</p>
                {% else %}
                <p class="danger">Out of Stock: {{item.stock}}</p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    <!-- paginator navigation button start -->
    <div class="paginator">
        {% if page_obj.has_previous %}
        <a href="?page={{page_obj.previous_page_number}}">
            <small class="active-nav"><i class="fa-solid fa-angles-left"></i></small>
        </a>
        {% else %}
        <small class="not-active-nav"><i class="fa-solid fa-angles-left"></i></small>
        {% endif %}
        <span>Page
            <span class="active-page">{{page_obj.number}}</span> of
            <span>{{page_obj.paginator.num_pages}}</span>
        </span>
        {% if page_obj.has_next %}
        <a href="?page={{page_obj.next_page_number}}" class="tooltip relative">
            <small class="active-nav"><i class="fa-solid fa-angles-right"></i></small>
        </a>
        {% else %}
        <small class="not-active-nav"><i class="fa-solid fa-angles-right"></i></small>
        {% endif %}
    </div>
    <!-- paginator navigation button end -->
</div>
<script src="{% static '/js/script.js' %}"></script>
{% endblock content %}